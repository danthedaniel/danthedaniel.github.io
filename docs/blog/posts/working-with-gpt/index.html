<!DOCTYPE html>


<html lang="en-us" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Working With GPT - danangell.com/blog</title>

<meta name="description" content="The programmer internet is polarizing over ChatGPT. Some claim that it is nearly AGI, some claim it cannot do anything of value, with plenty of people in between. I&rsquo;ve worked with GPT-3 professionally, used CoPilot for over a year, and recently started programming side-projects with the assistance of ChatGPT (I pay for GPT-4 access). I&rsquo;m considering working with LLMs full time again, so I pay close attention to what the GPT models can actually do.">





<link rel="icon" type="image/x-icon" href="https://danangell.com/blog/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://danangell.com/blog/favicon.png">


<style>
  body {
    visibility: hidden;
    opacity: 0;
  }
</style>

<noscript>
  <style>
    body {
      visibility: visible;
      opacity: 1;
    }
  </style>
</noscript>



    





    
    
        
    
    

    
        <link rel="stylesheet" href="https://danangell.com/blog/css/style.min.ca709c0968724ee5b61f89cb70717523fe842586488c76f4aadcc9bfa7ae4abb.css" integrity="sha256-ynCcCWhyTuW2H4nLcHF1I/6EJYZIjHb0qtzJv6euSrs=">
    





    

    





    
    
        
    
    

    
        <script src="https://danangell.com/blog/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js" type="text/javascript" charset="utf-8" integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script>
    







<meta property="og:title" content="Working With GPT" />
<meta property="og:description" content="The programmer internet is polarizing over ChatGPT. Some claim that it is nearly AGI, some claim it cannot do anything of value, with plenty of people in between. I&rsquo;ve worked with GPT-3 professionally, used CoPilot for over a year, and recently started programming side-projects with the assistance of ChatGPT (I pay for GPT-4 access). I&rsquo;m considering working with LLMs full time again, so I pay close attention to what the GPT models can actually do." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://danangell.com/blog/posts/working-with-gpt/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-07T17:14:55-07:00" />
<meta property="article:modified_time" content="2023-04-07T17:14:55-07:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Working With GPT"/>
<meta name="twitter:description" content="The programmer internet is polarizing over ChatGPT. Some claim that it is nearly AGI, some claim it cannot do anything of value, with plenty of people in between. I&rsquo;ve worked with GPT-3 professionally, used CoPilot for over a year, and recently started programming side-projects with the assistance of ChatGPT (I pay for GPT-4 access). I&rsquo;m considering working with LLMs full time again, so I pay close attention to what the GPT models can actually do."/>









<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.2/katex.min.css"
  integrity="sha384-XFgyVzCwumZgSg6F85gbh6ev/BVWgP7QAb1V3GOchWQPifusZTU0ODnQsysBK61F" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.2/katex.min.js"
  integrity="sha384-RpxfKy6OA0Us+WtIGBbrVlfwW4HuETdB9CD8KbG6qSbYbCanfnyid62sojNvydoB" crossorigin="anonymous"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&family=Roboto+Mono&display=swap">

<script>
  
  setTimeout(function () {
    var math_elements = document.querySelectorAll('pre.math');

    math_elements.forEach(function (e) {
      e.innerHTML = katex.renderToString(e.innerText);
    });
  }, 100);
</script>

    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header"> 
            
                <div class="header-top">
    <h1 class="site-title">
        <a href="/blog">danangell.com/blog</a>
    </h1>
    <a href="/blog/about">about</a>
    <div>
        <ul class="social-icons">

    
    
    
    
    <li>
        <a href="https://github.com/danthedaniel" title="Github" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

</span>

        </a>
    </li>
    
    
    
    
    
    <li>
        <a href="https://www.linkedin.com/in/daniel-angell" title="Linkedin" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

</span>

        </a>
    </li>
    
    

    
</ul>
        





<button class="theme-switcher">
    <img src="/blog/image/dark-mode.svg" />
</button>


<script>
    const STORAGE_KEY = 'user-color-scheme'
    const defaultTheme = "auto"

    let currentTheme
    let switchButton
    let autoDefinedScheme = window.matchMedia('(prefers-color-scheme: dark)')

    const autoChangeScheme = e => {
        currentTheme = e.matches ? 'dark' : 'light'
        document.documentElement.setAttribute('data-theme', currentTheme)
        changeButtonImage()
    }

    document.addEventListener('DOMContentLoaded', function () {
        switchButton = document.querySelector('.theme-switcher')
        currentTheme = detectCurrentScheme()
        if (currentTheme == 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark')
        }
        if (currentTheme == 'auto') {
            autoChangeScheme(autoDefinedScheme);
            autoDefinedScheme.addListener(autoChangeScheme);
        }

        if (switchButton) {
            changeButtonImage()
            switchButton.addEventListener('click', switchTheme, false)
        }

        showContent()
    })

    function detectCurrentScheme() {
        if (localStorage.getItem(STORAGE_KEY)) {
            return localStorage.getItem(STORAGE_KEY)
        }
        if (defaultTheme) {
            return defaultTheme
        }
        if (!window.matchMedia) {
            return 'light'
        }
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            return 'dark'
        }
        return 'light'
    }

    function changeButtonImage() {
        if (switchButton) {
            switchButton.innerHTML = currentTheme == 'dark' ? '<img src="/blog/image/light-mode.svg" />' : '<img src="/blog/image/dark-mode.svg" />';
        }
    }

    function switchTheme(e) {
        if (currentTheme == 'dark') {
            localStorage.setItem(STORAGE_KEY, 'light')
            document.documentElement.setAttribute('data-theme', 'light')
            currentTheme = 'light'
        } else {
            localStorage.setItem(STORAGE_KEY, 'dark')
            document.documentElement.setAttribute('data-theme', 'dark')
            currentTheme = 'dark'
        }
        changeButtonImage()
    }

    function showContent() {
        document.body.style.visibility = 'visible';
        document.body.style.opacity = 1;
    }
</script>
    </div>
</div>


            
        </header>
        <main id="main" tabindex="-1"> 
            
    

    <article class="post h-entry">
        <div class="post-header">
            <header>
                <h1 class="p-name post-title">Working With GPT</h1>

                
            </header>
        </div>
        <div class="content e-content">
            <p>The programmer internet is polarizing over ChatGPT. Some claim that it is nearly AGI, some claim it cannot do anything of value, with plenty of people in between. I&rsquo;ve worked with GPT-3 professionally, used CoPilot for over a year, and recently started programming side-projects with the assistance of ChatGPT (I pay for GPT-4 access). I&rsquo;m considering working with LLMs full time again, so I pay close attention to what the GPT models can actually do.</p>
<p>It&rsquo;s actually not very obvious what ChatGPT is good at for a number of reasons. But the trickiest is that <strong>ChatGPT is multiple things at once</strong>, and all through the same interface.</p>
<h2 id="chatgpt-as-a-search-engine" >ChatGPT as a Search Engine
<span>
    <a href="#chatgpt-as-a-search-engine">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>There are some things that ChatGPT has seen enough times, and the humans prompting it are not divided over, which you can ask it about without much chance of failure.</p>
<p>For example:</p>
<blockquote>
<p><strong>User</strong>: When was Abraham Lincoln born?</p>
</blockquote>
<blockquote>
<p><strong>ChatGPT</strong>: Abraham Lincoln was born on February 12, 1809.</p>
</blockquote>
<p><a href="https://en.wikipedia.org/wiki/Abraham_Lincoln">Checks out</a></p>
<p>Or more on topic:</p>
<blockquote>
<p><strong>User</strong>: How do I copy a docker build argument into an environment variable within a Dockerfile?</p>
</blockquote>
<blockquote>
<p><strong>ChatGPT</strong>: In a Dockerfile, you can copy a build argument into an environment variable using the <code>ARG</code> and <code>ENV</code> instructions. Here&rsquo;s how to do it:</p>
<ol>
<li>First, use the ARG instruction to define a build argument, with a default value if desired:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-docker" data-lang="docker"><span style="display:flex;"><span><span style="color:#66d9ef">ARG</span> MY_BUILD_ARG<span style="color:#f92672">=</span>default_value
</span></span></code></pre></div><ol start="2">
<li>Then, use the ENV instruction to create an environment variable and set its value to the build argument:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-docker" data-lang="docker"><span style="display:flex;"><span><span style="color:#66d9ef">ENV</span> MY_ENV_VAR<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>MY_BUILD_ARG<span style="color:#e6db74">}</span><span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></blockquote>
<p>I could have used the docker documentation or Stack Overflow to get the same result. But ChatGPT can also get this right, and most helpfully it can take your specific needs and customize the output to them:</p>
<blockquote>
<p><strong>User</strong>: How do I copy a docker build argument into an environment variable within a Dockerfile? My PaaS provides the argument COMMIT_ID and I need it to be exposed as GIT_COMMIT in my container, with &ldquo;unset&rdquo; as the fallback value.</p>
</blockquote>
<blockquote>
<p><strong>ChatGPT</strong>: To copy the <code>COMMIT_ID</code> build argument into the <code>GIT_COMMIT</code> environment variable with a fallback value of &ldquo;unset&rdquo;, you can use the <code>ARG</code> and <code>ENV</code> instructions in your Dockerfile. Here&rsquo;s an example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-docker" data-lang="docker"><span style="display:flex;"><span><span style="color:#75715e"># Define the build argument and set the fallback value</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">ARG</span> COMMIT_ID<span style="color:#f92672">=</span>unset
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Copy the build argument into an environment variable</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">ENV</span> GIT_COMMIT<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>COMMIT_ID<span style="color:#e6db74">}</span><span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></blockquote>
<p>The problem is that for more esoteric questions ChatGPT may make up an answer. It&rsquo;s primed to be very careful about making up news events, but not so much docker commands. So for situations where you do not have instant feedback from your computer on the correctness of ChatGPT&rsquo;s output, it is not a suitable replacement for a search engine.</p>
<h2 id="chatgpt-as-an-overpowered-markov-chain" >ChatGPT as an Overpowered Markov Chain
<span>
    <a href="#chatgpt-as-an-overpowered-markov-chain">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>My favorite ChatGPT use case from the last month was in translating documentation into an enum. The Prisma NodeJS database ORM is generally pretty good, but it&rsquo;s not perfect. I&rsquo;d asked ChatGPT, as a search engine, how I can detect if a Postgres insert fails due to a uniqueness constraint on a specific column:</p>
<blockquote>
<p><strong>User</strong>: I have a prisma model WebhookEvent. How can I tell if an insert to the table failed because of the unique constraint on the <code>event_id</code> column?</p>
</blockquote>
<blockquote>
<p><strong>ChatGPT</strong>: When you try to insert a record with a unique constraint violation in Prisma, it will throw a <code>PrismaClientKnownRequestError</code> with a specific error code. To check if the insert failed due to the unique constraint on the event_id column, you can catch the error and verify its code and related metadata.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">webhookEvent</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">prisma</span>.<span style="color:#a6e22e">webhookEvent</span>.<span style="color:#a6e22e">create</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">webhookEventData</span>,
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">webhookEvent</span>;
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">error</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Prisma</span>.<span style="color:#a6e22e">PrismaClientKnownRequestError</span> <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">code</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;P2002&#39;</span> <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">meta</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;event_id&#39;</span>)
</span></span><span style="display:flex;"><span>  ) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Insert failed due to a unique constraint violation on the event_id column.&#39;</span>);
</span></span><span style="display:flex;"><span>  } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;An unexpected error occurred:&#39;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></blockquote>
<p>This also <a href="https://community.redwoodjs.com/t/how-to-handle-prisma-unique-constraints-with-a-friendly-error/4117">checks out</a> as of a few months ago. And it&rsquo;s nice that ChatGPT was able to tailor the solution to my code base.</p>
<p>But that bit that says <code>error.code === &quot;P2002&quot;</code> seems lame. There should be some source of truth for these error codes, right?</p>
<blockquote>
<p><strong>User</strong>: Is there an enum in Prisma that I can reference instead of using <code>&quot;P2002&quot;</code>?</p>
</blockquote>
<blockquote>
<p><strong>ChatGPT</strong>: Yes, Prisma has an enum called PrismaErrorCode that you can use to reference error codes instead of hardcoding them as strings. Here&rsquo;s how you can update the previous example to use the PrismaErrorCode enum:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">PrismaClient</span>, <span style="color:#a6e22e">Prisma</span> } <span style="color:#f92672">=</span> <span style="color:#66d9ef">require</span>(<span style="color:#e6db74">&#39;@prisma/client&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Prisma</span>.<span style="color:#a6e22e">PrismaErrorCode</span>.<span style="color:#a6e22e">UniqueConstraintViolation</span>
</span></span></code></pre></div></blockquote>
<p>And&hellip;</p>
<pre tabindex="0"><code>Property &#39;PrismaErrorCode&#39; does not exist on type &#39;typeof Prisma&#39;.ts(2339)
</code></pre><p>It seems ChatGPT has lied to me! But that&rsquo;s not an issue because the TypeScript compiler won&rsquo;t. And shockingly, there actually isn&rsquo;t any source of truth for Prisma error codes. A quick Google search will turn up <a href="https://www.prisma.io/docs/reference/api-reference/error-reference">this page</a> as the only reference available.</p>
<p>I would still love to have an enum, though&hellip;</p>
<p>ChatGPT to the rescue! All I need to do is forgive the beefy markov chain, and embrace its pattern-matching nature. Here I&rsquo;ve just copied everything from the docs and pasted it into the prompt:</p>
<blockquote>
<p><strong>User</strong>: Can you turn this documentation into a typescript enum for prisma error codes? Please include comments on each enum variant, along with descriptive and concise names:</p>
<p>Error codes</p>
<p>Common</p>
<p>P1000</p>
<p>&ldquo;Authentication failed against database server at {database_host}, the provided database credentials for {database_user} are not valid. Please make sure to provide valid database credentials for the database server at {database_host}.&rdquo;</p>
<p>P1001</p>
</blockquote>
<blockquote>
<p>&ldquo;Can&rsquo;t reach database server at {database_host}:{database_port} Please make sure your database server is running at {database_host}:{database_port}.&rdquo;</p>
<p>P1002</p>
</blockquote>
<p>etc.</p>
<blockquote>
<p><strong>ChatGPT</strong>: Here is an enum representing Prisma error codes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">PrismaError</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Common
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">AuthenticationFailed</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1000&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">DatabaseServerUnreachable</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">DatabaseServerTimeout</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1002&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">DatabaseDoesNotExist</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1003&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">OperationTimeout</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1008&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">DatabaseAlreadyExists</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1009&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">AccessDenied</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1010&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">TlsConnectionError</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1011&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">SchemaValidationError</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1012&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">InvalidDatabaseString</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1013&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">UnderlyingModelError</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1014&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">UnsupportedDatabaseFeatures</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1015&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">IncorrectNumberOfParameters</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1016&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ConnectionClosed</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P1017&#34;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Prisma Client (Query Engine)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">ColumnValueTooLong</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P2000&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">RecordNotFound</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P2001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">UniqueConstraintFailed</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;P2002&#34;</span>,
</span></span></code></pre></div></blockquote>
<p>etc.</p>
<p>Now, it didn&rsquo;t do everything I asked. It didn&rsquo;t &ldquo;include comments on each enum variant&rdquo;. But god damn. This is quite the solution! Not only is it all correct, the names are also impressively good! <code>DatabaseServerUnreachable</code> does not appear in the source docs, that name is synthesized from the error description. And now we have the full (at time of writing) error list to reference as our code-base grows.</p>
<p>Our <code>if</code> statement&rsquo;s much better now:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">error</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Prisma</span>.<span style="color:#a6e22e">PrismaClientKnownRequestError</span> <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">code</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">PrismaError</span>.<span style="color:#a6e22e">UniqueConstraintFailed</span> <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">meta</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#39;event_id&#39;</span>)
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>That worked really well. But I&rsquo;ve noticed that for times where I get too deep into higher-kinded types with Typescript ChatGPT will fail pretty hard. To be fair, when I try to write the code manually I also struggle. That kind of code is usually there for ego-stroking, though. So maybe it&rsquo;s best left un-written.</p>
<h2 id="conclusion" >Conclusion
<span>
    <a href="#conclusion">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>ChatGPT is a tool. It&rsquo;s a tool that tricks you into thinking it knows more than it does. But once you learn its capabilities it&rsquo;s useful. Not just day-to-day, but multiple times per hour. It can take a while to learn how much is too much to ask of it. Writing in an uncommon language? You&rsquo;ll have much more trouble than asking it to write React code. Rewriting your code to meet the demands of a new user? Sorry, not yet.</p>
<p>But the models will only get better from here. And hooking GPT into a search engine, a compiler, and your documentation will give it super powers. Right now it feels like a 15-20% speed boost for coding. But when it takes away some painful work like restructuring documentation into code and you feel that 100x time save - oh man that&rsquo;s a taste of the future right there.</p>

        </div>
        


<div class="post-info">
    
        <div class="post-date dt-published">2023-04-07</div>
    

    <a class="post-hidden-url u-url" href="https://danangell.com/blog/posts/working-with-gpt/">https://danangell.com/blog/posts/working-with-gpt/</a>
    <a href="https://danangell.com/blog" class="p-name p-author post-hidden-author h-card" rel="me">Daniel Angell</a>


    <div class="post-taxonomies">
        
            
                <ul class="post-tags">
                    
                        
                        <li><a href="https://danangell.com/blog/tags/gpt/">#gpt</a></li>
                    
                        
                        <li><a href="https://danangell.com/blog/tags/programming/">#programming</a></li>
                    
                </ul>
        
    </div>
</div>

    </article>

    

    

    
        







    

        </main>
        
            <footer class="common-footer">
    
    

    <div class="common-footer-bottom">
        
        <div class="copyright">
            <p>© Daniel Angell, 2023<br>
                
            </p>
        </div>
    </div>

    <p class="h-card vcard">

    <a href=https://danangell.com/blog class="p-name u-url url fn" rel="me">Daniel Angell</a> 

    

    
</p> 
</footer>
        
    </div>
</body>
</html>
